.. _rust-update-many-usage:

=========================
Update Multiple Documents
=========================

You can update multiple documents in a collection by calling the `update_many()
<{+api+}/struct.Collection.html#method.update_many>`__ method on a
``Collection`` instance.

Pass the following parameters to the ``update_many()`` method to update
a document:

- Query filter, which specifies the criteria to match
- Update document, which specifies the updates to make to all matching
  documents

The ``update_many()`` method returns an `UpdateResult
<{+api+}/results/struct.UpdateResult.html>`__ type that contains
information about the result of the update operation, such as the
number of modified documents.

To learn more about the ``update_many()`` method, see the
:ref:`rust-change-guide` guide.

Example
-------

This example updates a document in the ``restaurants`` collection of
the ``sample_restaurants`` database. The example uses a ``Restaurant``
struct that has ``borough`` and ``address`` fields to model the
documents in the collection.

The following code adds the ``near_me`` field to documents in which the
value of the ``address.street`` field is ``"Sullivan Street"`` and the
``borough`` field is ``"Manhattan"``.

Select the :guilabel:`Asynchronous` or :guilabel:`Synchronous` tab to
see the corresponding code for each runtime:

.. tabs::

   .. tab:: Asynchronous
      :tabid: update-many-async

      .. io-code-block::
         :copyable: true

        .. input:: /includes/usage-examples/code-snippets/update-many-async.rs
            :language: rust
            :dedent:

        .. output::
            :language: console
            :visible: false

            // Your values might differ
            Matched documents: 22
            Updated documents: 22

   .. tab:: Synchronous
      :tabid: update-many-sync

      .. io-code-block::
         :copyable: true

        .. input:: /includes/usage-examples/code-snippets/update-many-sync.rs
            :language: rust
            :dedent:

        .. output::
            :language: console
            :visible: false

            // Your values might differ
            Matched documents: 22
            Updated documents: 22
