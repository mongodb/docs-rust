.. _rust-usage-deletemany:

=========================
Delete Multiple Documents
=========================

You can delete multiple documents from a collection in a single operation
by calling the ``delete_many()`` method on a ``Collection`` instance.

To specify which documents to delete, pass a query filter that matches
the documents you want to delete. If you provide an empty document,
MongoDB matches all documents in the collection and deletes them. While
you can use ``delete_many()`` to delete all documents in a collection,
consider calling the ``drop()`` method on a ``Collection`` instance instead
for better performance. The ``drop()`` method also deletes all the indexes
associated with the collection. To learn more about the ``drop()`` method,
see the :ref:`rust-drop-collection` section in the Databases and Collections
guide.

The ``delete_many()`` method returns a ``DeleteResult`` type, which contains
information about the operation that MongoDB ran. You can retrieve the total
number of documents deleted from the ``deleted_count`` field of the ``DeleteResult``
instance.

Example
-------

This example deletes documents from the ``restaurants`` collection that represent French
restaurants. The example uses a ``Restaurants`` struct containing ``name`` and ``cuisine``
fields to model the documents in the collection.

This example accesses the ``planets`` collection in the ``sample_guides``
database and deletes the documents representing the three closest planets
to the sun. The following code filters for and deletes documents with an
``orderFromSun`` field value less than or equal to ``3``:

.. tabs::

   .. tab:: Asynchronous Runtime
      :tabid: delete-many-async

      .. literalinclude:: /includes/usage-examples/code-snippets/delete-many-async.rs
         :language: rust
         :copyable:
         :dedent:

   .. tab:: Synchronous Runtime
      :tabid: delete-many-sync

      .. literalinclude:: /includes/usage-examples/code-snippets/delete-many-sync.rs
         :language: rust
         :copyable:
         :dedent:

Expected Result
~~~~~~~~~~~~~~~

Running either of the preceding full examples prints the following results:

.. code-block:: none

   Deleted documents: 3

Additional Information
----------------------

To learn more parameters you can set on delete operations, see the :ref:`rust-delete-guide`
guide.

To learn more about using query filters, see :ref:`rust-query-guide`.

API Documentation
-----------------

To learn more about the methods and types mentioned on this
page, see the following API documentation:

- `delete_many() <{+api+}/struct.Collection.html#method.delete_many>`__
- `DeleteResult <{+api+}/results/struct.DeleteResult.html>`__
- `deleted_count <{+api+}/results/struct.DeleteResult.html#structfield.deleted_count>`__
